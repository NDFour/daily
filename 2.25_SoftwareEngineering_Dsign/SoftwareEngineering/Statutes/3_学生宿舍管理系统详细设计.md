# 学生宿舍管理系统详细设计

### 1. 简介

##### 1.1 目的

本文描述了学生宿舍管理系统的详细设计，按照学生宿舍管理系统项目规划书和学生宿舍管理系统的需求规约的目标和要求，将整个系统分为了：

1. 宿舍分配情况查看
2. 宿舍资料查看
3. 宿舍分配
4. 内务管理
5. 水费统计
6. 电费统计
7. 宿舍报修

七个大的开发模块。学生宿舍管理系统的详细设计给出了系统向外提供的接口，并对接口的功能进行描述。

##### 1.2 范围

本文将直接影响到学生宿舍管理系统的设计与开发、模块划分、详细设计、编码，工作量评估、人力资源配置等活动。

##### 1.3 定义、首字母缩写词和缩略语

无。

##### 1.4 参考资料

《学生宿舍管理系统需求规约》
《学生宿舍管理系统概要设计》

### 2. 总体结构设计

**总体结构设计图：**

![总体结构设计图](/usr/bdpan_movie/daily/2.25_SoftwareEngineering_Dsign/SoftwareEngineering/pics/总体结构设计图.png)



### 3. 模块详细设计

##### 3.1 宿舍分配情况查看

###### 3.1.1 宿舍分配情况查看实现设计

宿舍分配情况查看主要包含用户选择宿舍、访问数据库获得信息、返回信息到浏览器、浏览器展示数据几个主要动作。

###### 3.1.1.1 任务状态图

![任务状态图-宿舍分配情况查看](/usr/bdpan_movie/daily/2.25_SoftwareEngineering_Dsign/SoftwareEngineering/pics/任务状态图-宿舍分配情况查看.png)

###### 3.1.2 宿舍分配情况查看函数设计

| 函数名                             | 备注                                              |
| ---------------------------------- | ------------------------------------------------- |
| dormitory_detail(dormitory_number) | 根据dormitory_number查找数据库并返回Dormitory对象 |

**代码如下：**

```python
# 宿舍详情页
def dormitory_detail(request, dormitory_number):
    dormitory = get_object_or_404(Dormitory, number = dormitory_number)
    starList = Dormitory.objects.all().order_by("-star")
    context = {
        'dormitory': dormitory,
        'starList': starList,
        }
    return render(request, 'index_Dormitory.html', context)
```



##### 3.2 宿舍资料查看

###### 3.2.1 宿舍资料查看实现设计

宿舍资料查看主要包含用户选择宿舍、访问数据库获得信息、返回信息到浏览器、浏览器展示数据几个主要动作。

###### 3.2.1.1 任务状态图

![任务状态图-宿舍资料查看](/usr/bdpan_movie/daily/2.25_SoftwareEngineering_Dsign/SoftwareEngineering/pics/任务状态图-宿舍资料查看.png)

###### 3.1.2 宿舍资料查看函数设计

| 函数名                             | 备注                                              |
| ---------------------------------- | ------------------------------------------------- |
| dormitory_detail(dormitory_number) | 根据dormitory_number查找数据库并返回Dormitory对象 |

**代码如下：**

```python
# 宿舍详情页
def dormitory_detail(request, dormitory_number):
    dormitory = get_object_or_404(Dormitory, number = dormitory_number)
    starList = Dormitory.objects.all().order_by("-star")
    context = {
        'dormitory': dormitory,
        'starList': starList,
        }
    return render(request, 'index_Dormitory.html', context)
```



##### 3.3  宿舍报修

###### 3.3.1 任务状态图

![任务状态图-报修](/usr/bdpan_movie/daily/2.25_SoftwareEngineering_Dsign/SoftwareEngineering/pics/任务状态图-报修.png)

###### 3.3.2 宿舍报修函数设计

| 函数名                   | 备注                                         |
| ------------------------ | -------------------------------------------- |
| repair(dormitory_number) | 根据dormitory_number查找数据库并标记相应字段 |

**代码如下：**

```python
  # 宿舍保修
  def repair(request, dormitory_number):
      dormitory = get_object_or_404(Dormitory, number = dormitory_number)
      try:
          dormitory.isRepair = 1
          dormitory.save()
          return HttpResponse('报修成功' + str(dormitory.isRepair))
      except:
          return HttpResponse('报修失败')

```



##### 3.4 学生资料查看

###### 3.4.1 任务状态图

![任务状态图-学生资料查看](/usr/bdpan_movie/daily/2.25_SoftwareEngineering_Dsign/SoftwareEngineering/pics/任务状态图-学生资料查看.png)

###### 3.4.2学生信息查看函数设计

| 函数名                     | 备注                                      |
| -------------------------- | ----------------------------------------- |
| student_detail(stu_number) | 根据stu_number查找数据库并返回student信息 |

**代码如下：**

```python
  # 学生详情页
  def student_detail(request, stu_number):
      student = get_object_or_404(Student, number = stu_number)
      starList = Dormitory.objects.all().order_by("-star")
      context = {
          'student': student,
          'starList': starList,
          }
      return render(request, 'index_Student.html', context)

```

